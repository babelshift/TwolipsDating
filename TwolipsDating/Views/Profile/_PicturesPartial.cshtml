@model TwolipsDating.ViewModels.UploadImageViewModel

@if (Model.ProfileUserId == Model.CurrentUserId && Model.IsCurrentUserEmailConfirmed)
{
    using (Html.BeginForm("uploadimage", "profile", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary()
        <div class="row">
            <div class="col-md-6">
                <div class="input-group">
                    <span class="input-group-btn">
                        <span class="btn btn-default btn-file">
                            <i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Browse...
                            @Html.TextBoxFor(x => x.UploadedImages, new { type = "file", multiple = "multiple", accept = "image/jpeg,image/gif,image/bmp,image/png" })
                        </span>
                    </span>
                    <input type="text" class="form-control" readonly>
                </div>
            </div>
            <div class="col-md-3">
                <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-upload"></i>&nbsp;Upload</button>
            </div>
            @Html.HiddenFor(m => m.ProfileUserId)
        </div>
    }
    <br />
}
@if (Model.UserImages != null && Model.UserImages.Count > 0)
{
    <div class="row wrapper">
        @foreach (var userImage in Model.UserImages)
        {
            <div id="@String.Format("{0}-image-div", userImage.Id)" class="col-xs-6 col-md-3">
                @if (Model.CurrentUserId == Model.ProfileUserId)
                {
                    <button onclick="onDeleteImage(event, this, @userImage.Id, '@userImage.FileName', '@Model.ProfileUserId')" style="position: absolute; top: 3px; right: 18px;" class="btn btn-default btn-xs">
                        <i class="glyphicon glyphicon-remove"></i>
                    </button>
                }
                <a class="thumbnail" data-parent=".wrapper" data-toggle="lightbox" data-gallery="multiimages" href="@userImage.Path" style="min-height: 128px; max-height: 128px;">
                    <img src="@userImage.Path" style="max-height: 118px;">
                </a>
            </div>
        }
    </div>
}
else
{
    <h4>This user doesn't have any uploaded images yet.</h4>
}